<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="group_fund_manager" model="res.groups">
            <field name="name">Fund Manager</field>
        </record>
        <record id="group_fund_accountant" model="res.groups">
            <field name="name">Fund Accountant</field>
        </record>
        <record id="group_fund_operator" model="res.groups">
            <field name="name">Fund Operator</field>
        </record>
        <record id="group_fund_auditor" model="res.groups">
            <field name="name">Fund Auditor</field>
        </record>

        <!-- Record rules: limiting records by company -->
        <record id="rule_fund_company_restrict" model="ir.rule">
            <field name="name">Fund: restrict by company</field>
            <field name="model_id" ref="model_fund_position"/>
            <field name="domain_force">
                ['|',('fund_id','=',user.company_id.id'),('fund_id','child_of',user.company_id.id)]
            </field>
            <field name="groups" eval="[(4, ref('group_fund_operator')), (4, ref('group_fund_accountant'))]"/>
        </record>


        <record id="fund_fund_rule_user" model="ir.rule">
            <field name="name">Fund: user can only see records of their company</field>
            <field name="model_id" ref="model_efund_fund"/>
            <field name="domain_force">[('company_id', 'in', user.company_ids.ids)]</field>
            <field name="groups" eval="[(4, ref('base.group_user'))]"/>
        </record>
    </data>
</odoo>
